"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["7285"],{1119:function(e,s,n){n.r(s),n.d(s,{default:()=>d});var r=n(4246),i=n(980);function a(e){let s=Object.assign({h1:"h1",a:"a",p:"p",div:"div",pre:"pre",code:"code",h2:"h2"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.h1,{id:"路由生成",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#路由生成",children:"#"}),"路由生成"]}),"\n",(0,r.jsx)(s.p,{children:"通过目录结构生成路由配置，目录结构既是路由地址"}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"TIP"}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsx)(s.p,{children:"在项目中引入路由数据，例如："}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import routes from '@fairys:routes';\n// 或\nimport routes from '@@/routes';\n// 或\nimport routes from '@/.fairys/routes';\n"})})]})]}),"\n",(0,r.jsxs)(s.h2,{id:"rsbuild配置",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#rsbuild配置",children:"#"}),"rsbuild配置"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import { defineConfig } from '@rsbuild/core';\nimport { RsbuildReactRoutesPlugin } from '@fairys/admin-tools-react-plugins';\nexport default defineConfig({\n  // ...\n  plugins: [\n    // ...\n    RsbuildReactRoutesPlugin({}),\n  ],\n});\n"})}),"\n",(0,r.jsxs)(s.h2,{id:"rspack配置",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#rspack配置",children:"#"}),"rspack配置"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:"import { defineConfig } from '@rsbuild/core';\nimport { ReactRoutesPlugin } from '@fairys/admin-tools-react-plugins';\nexport default defineConfig({\n  tools: {\n    rspack: {\n      plugins: [\n        // ....\n        new ReactRoutesPlugin({}),\n      ],\n    },\n  },\n});\n\n"})}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"注意"}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsxs)(s.p,{children:["在使用ts项目时，需要在",(0,r.jsx)(s.code,{children:"tsconfig.json"}),"中添加如下配置："]}),(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "paths": {\n      "@/*": ["./src/*"],\n      "@@/*": ["./src/.fairys/*"],\n      "@fairys:routes": ["./src/.fairys/routes"]\n    }\n  },\n}\n'})})]})]}),"\n",(0,r.jsxs)(s.h2,{id:"配置项",children:[(0,r.jsx)(s.a,{className:"header-anchor","aria-hidden":"true",href:"#配置项",children:"#"}),"配置项"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-ts",children:'\nexport interface ReactRoutesPluginOptions {\n  /**\n   * @description 加载类型\n   * @default "layout_default_lazy"\n   *\n   * @choices ["lazy", "default", "layout_default_lazy"]\n   *\n   * "lazy": 异步加载\n   *\n   * "default": 同步加载\n   *\n   * "layout_default_lazy": 布局默认加载没有其他子路由时异步加载\n   */\n  loadType?: \'lazy\' | \'default\' | \'layout_default_lazy\';\n  /**\n   * @description 监听目录\n   * @default ["src/pages"]\n   */\n  watchDirs?: WatchDirsItem[];\n  /**\n   * @description 是否根据目录结构生成树路由\n   */\n  isTreeRoute?: boolean;\n\n  /**\n   * @description 保持路由组件的 HOC 函数\n   */\n  keepAliveBasePath?: string;\n  /**\n   * @description 自定义 HydrateFallback 组件\n   */\n  hydrateFallback?: string;\n}\n\nexport interface WatchDirsItem {\n  /**\n   * @description 监听目录\n   * @default "src/pages"\n   */\n  dir: string;\n  /**\n   * @description 路由前缀\n   * @default "/"\n   */\n  routePrefix?: string;\n}\n\n'})}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive tip",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"默认 HydrateFallback 组件代码"}),(0,r.jsx)(s.div,{className:"rspress-directive-content",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-tsx",children:"function HydrateFallback() {\n    return <p> Loading </p>;\n}\n"})})})]}),"\n",(0,r.jsxs)(s.div,{className:"rspress-directive warning",children:[(0,r.jsx)(s.div,{className:"rspress-directive-title",children:"注意"}),(0,r.jsxs)(s.div,{className:"rspress-directive-content",children:[(0,r.jsxs)(s.p,{children:["当",(0,r.jsx)(s.code,{children:"loadType = lazy"}),"时，如果需要开启页面缓存，建议同时配置",(0,r.jsx)(s.code,{children:"keepAliveBasePath"}),"值。否则页面缓存第一次打开不生效，需要再次打开才生效。"]}),(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"keepAliveBasePath"})," 配置不可和 ",(0,r.jsx)(s.code,{children:"FairysRoot"})," 组件中的 ",(0,r.jsx)(s.code,{children:"isOutletKeepAlive"})," 配置同时开启。"]}),(0,r.jsxs)(s.p,{children:["当配置 ",(0,r.jsx)(s.code,{children:"keepAliveBasePath"})," 时，",(0,r.jsx)(s.code,{children:"FairysRoot"})," 组件中的 ",(0,r.jsx)(s.code,{children:"isOutletKeepAlive"})," 设置为 ",(0,r.jsx)(s.code,{children:"false"}),", 否则控制台会报错。"]})]})]})]})}function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.ah)(),e.components);return s?(0,r.jsx)(s,Object.assign({},e,{children:(0,r.jsx)(a,e)})):a(e)}let d=t;t.__RSPRESS_PAGE_META={},t.__RSPRESS_PAGE_META["zh%2Fplugin%2Froute.md"]={toc:[{id:"rsbuild配置",text:"rsbuild配置",depth:2},{id:"rspack配置",text:"rspack配置",depth:2},{id:"配置项",text:"配置项",depth:2}],title:"路由生成",headingTitle:"路由生成",frontmatter:{}}}}]);