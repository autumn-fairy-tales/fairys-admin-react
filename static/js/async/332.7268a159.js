"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["332"],{167:function(e,t,a){a.d(t,{hY:()=>eh,eM:()=>es,Mn:()=>et,PO:()=>ei,$r:()=>e_,Jb:()=>ey,In:()=>el,o3:()=>ec,$1:()=>ea,jc:()=>ef,mN:()=>em,Cf:()=>ed,gb:()=>eB}),a(5894);var s=a(4246),i=a(2199);class r{state=(0,i.sj)({userName:"fairys"});updated=e=>{for(let t in e){let a=e[t];if("info"===t){let a=(0,i.iH)(e.info||{});this.state[t]=a}else this.state[t]=a}};clear=()=>{for(let e in this.state)this.state[e]=void 0,"userName"===e&&(this.state[e]="fairys")}}let n=new r;var o=a(6681);let l=new class{router=void 0;__navigate;onNavigateBefore;navigate=async(e,t)=>{let a=this.__navigate||this.router.navigate;if(!a)return console.warn("请先初始化路由"),Promise.resolve();if("number"==typeof e)return a?.(e);let s=!0;return(this.onNavigateBefore&&(s=await this.onNavigateBefore(e,(s=e,i=t)=>{null!==s&&a?.(s,i)})),s)?a?.(e,t):Promise.resolve()};createBrowserRouter=(e,t)=>{let a=(0,o.aj)(e,t);return this.__navigate=a.navigate,a.navigate=this.navigate,this.router=a,a};createMemoryRouter=(e,t)=>{let a=(0,o.bi)(e,t);return this.__navigate=a.navigate,a.navigate=this.navigate,this.router=a,a};createHashRouter=(e,t)=>{let a=(0,o.cP)(e,t);return this.__navigate=a.navigate,a.navigate=this.navigate,this.router=a,a};clear=()=>{}};class m{static localStorageKey="fairys_setting_state";state=(0,i.sj)({open:!1,layoutMode:"main_top_sub_left_header",_oldLayoutMode:"main_top_sub_left_header",pageTransitionMode:"滑动",autoListenSystemTheme:!0,sideMenuMode:"open",enableToolBarFavorites:!0,favoritesMaxLength:20,enableToolBarNotification:!0,enableToolBarFullScreen:!0,enableToolBarRefresh:!0,maxWidthScreen:1024,isMobile:!1});constructor(){let e=localStorage.getItem(m.localStorageKey);if(e)try{let t=JSON.parse(e);for(let e in t){let a=t[e];this.state[e]=a}}catch(e){console.log(e)}}initSetting=e=>{let t={layoutMode:"main_top_sub_left_header",...e,...this.state};t&&(t._oldLayoutMode=t.layoutMode),this.state=(0,i.sj)({...t,projectName:e.projectName,logo:e.logo}),this.state.themeColor&&(document.documentElement&&document.documentElement.setAttribute("style",`--fairys-theme-color:${this.state.themeColor}`),document.body&&document.body.setAttribute("style",`--fairys-theme-color:${this.state.themeColor}`)),this.autoListenSystemTheme()};mediaQueryList=null;setDocumentAndBodyTheme=()=>{let e=this.state.theme;e&&(document.documentElement&&(document.documentElement.classList.remove("dark"===e?"light":"dark"),document.documentElement.classList.add(e)),document.body&&(document.body.classList.remove("dark"===e?"light":"dark"),document.body.classList.add(e)))};onListenChangeSystemTheme=e=>{this.updated({theme:e.matches?"dark":"light"}),this.setDocumentAndBodyTheme()};autoListenSystemTheme=()=>{this.state.autoListenSystemTheme?(this.mediaQueryList?this.mediaQueryList.removeEventListener("change",this.onListenChangeSystemTheme):this.mediaQueryList=window.matchMedia("(prefers-color-scheme: dark)"),this.updated({theme:this.mediaQueryList.matches?"dark":"light"}),this.setDocumentAndBodyTheme(),this.mediaQueryList.addEventListener("change",this.onListenChangeSystemTheme)):(this.mediaQueryList?.removeEventListener("change",this.onListenChangeSystemTheme),this.mediaQueryList=null,this.setDocumentAndBodyTheme())};onToggleAutoListenSystemTheme=e=>{this.updated({autoListenSystemTheme:e}),this.autoListenSystemTheme()};onToggleTheme=e=>{"system"===e?this.updated({autoListenSystemTheme:!0}):this.updated({theme:e,autoListenSystemTheme:!1}),this.autoListenSystemTheme()};updatedThemeColor=e=>{this.updated({themeColor:e}),e?document.body.setAttribute("style",`--fairys-theme-color:${e}`):document.body.removeAttribute("style")};updated=e=>{let t={};try{t=JSON.parse(localStorage.getItem(m.localStorageKey)||"{}")}catch(e){console.log(e)}for(let a in e){let s=e[a];this.state[a]=s,"open"!==a&&(t[a]=s),"layoutMode"===a&&(t._oldLayoutMode=this.state.layoutMode),"theme"===a&&this.setDocumentAndBodyTheme()}localStorage.setItem(m.localStorageKey,JSON.stringify(t))};isMainSubMenuMode=()=>"main_sub_left"===this.state.layoutMode||"main_left"===this.state.layoutMode||"main_top_header"===this.state.layoutMode||"main_top_sub_left_header"===this.state.layoutMode;onToggleOpen=()=>{this.updated({open:!this.state.open})};onFullscreenChange=()=>{document.fullscreenElement?this.state.isFullScreen=!0:this.state.isFullScreen=!1};addEventListenerFullscreenChange=()=>(document.addEventListener("fullscreenchange",this.onFullscreenChange),()=>{document.removeEventListener("fullscreenchange",this.onFullscreenChange)});onToggleFullScreen=async()=>{try{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():await document.documentElement.requestFullscreen()}catch(e){console.log("onToggleFullScreen===>",e)}};mediaQueryListScreen=null;onListenChangeScreen=e=>{this.state.layoutMode=e.matches?"mobile":this.state._oldLayoutMode,this.state.isMobile=e.matches};autoListenScreen=()=>(this.state.maxWidthScreen&&(this.mediaQueryListScreen?this.mediaQueryListScreen.removeEventListener("change",this.onListenChangeScreen):this.mediaQueryListScreen=window.matchMedia(`(max-width: ${this.state.maxWidthScreen}px)`),this.state.layoutMode=this.mediaQueryListScreen.matches?"mobile":this.state._oldLayoutMode,this.state.isMobile=this.mediaQueryListScreen.matches,this.mediaQueryListScreen.addEventListener("change",this.onListenChangeScreen)),()=>{this.mediaQueryListScreen?.removeEventListener("change",this.onListenChangeScreen),this.mediaQueryListScreen=null});clear=()=>{}}let d=new m;var f=a(7378);let h=(e,t=[],a)=>{let s=[];for(let i=0;i<e.length;i++){let r=e[i];s.push(r),r.path&&a.set(r.path,[...t].concat(r)),Array.isArray(r.items)&&s.push(...h(r.items,[...t].concat(r),a))}return s},c=(e,t)=>{let a=e.length,s=t.length;return a===s||s>a?e:t.slice(0,s-1).map(e=>e.path).join("_")===e.slice(0,s-1).map(e=>e.path).join("_")?e:t};class y{_menuItems=[];_flatMenuItems=[];_parentMenuItemMap=new Map;state=(0,i.sj)({menuItems:[],mainMenuItems:[],mainMenuItemSelected:"",expandItems:[],mainExpandItem:void 0,searchMenuItems:[]});ctor=e=>{this._menuItems=e,this._flatMenuItems=h(e,[],this._parentMenuItemMap),this.state.menuItems=(0,i.iH)(e),this.state.mainMenuItems=(0,i.iH)(e.filter(e=>e.isMain)),this.state.searchMenuItems=(0,i.iH)([...this._flatMenuItems].filter(e=>!e.isMain));let t=this._flatMenuItems.filter(e=>e.isTabFixed&&!e.isMain);t.length&&x.ctor(t)};updateMainExpandItem=e=>{this.state.mainExpandItem=e};get_path_menuItem=e=>this._flatMenuItems.find(t=>t.path===e);onSearch=e=>{let t=`${e||""}`.trim();if(!t){this.state.searchMenuItems=(0,i.iH)([...this._flatMenuItems].filter(e=>!e.isMain));return}this.state.searchMenuItems=(0,i.iH)(this._flatMenuItems.filter(e=>!e.isMain).filter(e=>e.title.includes(t)))};isParentMenuItem=(e,t)=>{let a=this._parentMenuItemMap.get(t);return!!a&&!!a.find(t=>t.path===e)};clearExpandItems=()=>{this.state.expandItems=(0,i.iH)([])};onExpandItems=e=>{if(!this.get_path_menuItem(e))return;if(0===this.state.expandItems.length){let t=this._parentMenuItemMap.get(e)||[];this.state.expandItems=(0,i.iH)([...t]);return}let t=this.get_path_menuItem(e),a=this._parentMenuItemMap.get(e)||[];Array.isArray(t?.items)&&t.items.length?this.state.expandItems=(0,i.iH)([...a]):this.state.expandItems=c(this.state.expandItems,a)};onCollapseItems=e=>{this.state.expandItems=(0,i.iH)(this.state.expandItems.filter(t=>t.path!==e))};onToggleItems=e=>{this.state.expandItems.find(t=>t.path===e)?this.onCollapseItems(e):this.onExpandItems(e)};isExpand=e=>!!this.state.expandItems.find(t=>t.path===e);updateChildMenus=e=>{if(d.isMainSubMenuMode()){let t=this.state.mainMenuItemSelected,a=this._parentMenuItemMap.get(e),s=a?.[0]?.path;if(s&&s!==t){this.state.mainMenuItemSelected=s;let e=this.state.mainMenuItems.find(e=>e.path===s);e&&(this.state.menuItems=(0,i.iH)(e.items))}}};onMainMenu=e=>{let t=this.state.mainMenuItems.find(t=>t.path===e);t&&Array.isArray(t.items)&&(this.state.menuItems=(0,i.iH)(t.items),this.state.mainMenuItemSelected=e)};clear=()=>{this.state.menuItems=(0,i.iH)([]),this.state.mainMenuItems=(0,i.iH)([]),this.state.mainMenuItemSelected="",this.state.expandItems=(0,i.iH)([]),this.state.mainExpandItem=void 0,this.state.searchMenuItems=(0,i.iH)([])};onBeforeNavigate}let u=new y;class p{dom=(0,f.createRef)();menuItems=[];state=(0,i.sj)({menuModeExpandCollapse:"open"});setMenuModeExpandCollapse=e=>{this.state.menuModeExpandCollapse=e};register=e=>(this.menuItems.push(e),()=>{this.menuItems=this.menuItems.filter(t=>t!==e)});resizeObserverCallback=()=>{for(let e=0;e<this.menuItems.length;e++){let t=this.menuItems[e];t.isActive&&t.scrollIntoView()}};resizeObserver=()=>{let e=new ResizeObserver(this.resizeObserverCallback);return this.dom.current&&e.observe(this.dom.current),()=>{e.disconnect()}};addEventListener=()=>{let e=this.resizeObserver();return()=>{e()}}}(0,f.createContext)(new p);class g{state=(0,i.sj)({tabBarItems:[],dropDownTabBarItems:[],pageFullScreen:!1});ctor=e=>{this.state.tabBarItems=(0,i.iH)(e.sort((e,t)=>(e.sortTabFixed||0)-(t.sortTabFixed||0)))};addItem=e=>{this.state.tabBarItems.find(t=>t.path===e.path)||(this.state.tabBarItems=(0,i.iH)([...this.state.tabBarItems,e]))};add=e=>{if(!this.state.tabBarItems.find(t=>t.path===e)){let t=u.get_path_menuItem(e);t&&(this.state.tabBarItems=(0,i.iH)([...this.state.tabBarItems,t]))}};remove=(e,t)=>{if(t){let t=this.state.tabBarItems.findIndex(t=>t.path===e);this.state.tabBarItems=(0,i.iH)(this.state.tabBarItems.filter(t=>t.path!==e));let a=this.state.tabBarItems[t];a||(a=this.state.tabBarItems[this.state.tabBarItems.length-1]),a&&l.navigate(a.path)}else this.state.tabBarItems=(0,i.iH)(this.state.tabBarItems.filter(t=>t.path!==e));k.aliveController&&k.aliveController.drop(e)};onToggleFullScreen=()=>{this.state.pageFullScreen=!this.state.pageFullScreen};removeOther=(e,t)=>{if(!t){let t=this.state.tabBarItems.find((t,a)=>a===e);t&&l.navigate(t.path)}let a=this.state.tabBarItems.filter((t,a)=>a!==e&&!t.isTabFixed).map(e=>e.path);this.state.tabBarItems=(0,i.iH)(this.state.tabBarItems.filter((t,a)=>a===e||t.isTabFixed)),k.aliveController&&k.aliveController.dropScopeByIds(a)};removeLeft=(e,t)=>{if(!t){let t=this.state.tabBarItems.find((t,a)=>a===e);t&&l.navigate(t.path)}let a=this.state.tabBarItems.filter((t,a)=>a<e&&!t.isTabFixed).map(e=>e.path);this.state.tabBarItems=(0,i.iH)(this.state.tabBarItems.filter((t,a)=>a>=e||t.isTabFixed)),k.aliveController&&k.aliveController.dropScopeByIds(a)};removeRight=(e,t)=>{if(!t){let t=this.state.tabBarItems.find((t,a)=>a===e);t&&l.navigate(t.path)}let a=this.state.tabBarItems.filter((t,a)=>a>e&&!t.isTabFixed).map(e=>e.path);this.state.tabBarItems=(0,i.iH)(this.state.tabBarItems.filter((t,a)=>a<=e||t.isTabFixed)),k.aliveController&&k.aliveController.dropScopeByIds(a)};clear=()=>{this.state.tabBarItems=(0,i.iH)([]),this.state.pageFullScreen=!1,this.state.dropDownTabBarItems=(0,i.iH)([])}}let x=new g;class v{dom=(0,f.createRef)();tabBarItems=[];register=e=>(this.tabBarItems.push(e),()=>{this.tabBarItems=this.tabBarItems.filter(t=>t!==e)});timer;updateDropDownTabBarItems=()=>{clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.tabBarItems||[],t=this.dom.current?.getBoundingClientRect(),a=[];for(let s=0;s<e.length;s++){let i=e[s];if(i.dom.current){let e=i.dom.current.getBoundingClientRect(),s=e.width/2;e.left>=t.left-s&&e.right<=t.right+s||a.push(i.item)}}let s=a.map(e=>({...e,isShowClose:!0!==e.isTabFixed}));x.state.dropDownTabBarItems=(0,i.iH)(s),clearTimeout(this.timer)},500)};mutationObserverCallback=()=>{this.updateDropDownTabBarItems()};resizeObserverCallback=()=>{for(let e=0;e<this.tabBarItems.length;e++){let t=this.tabBarItems[e];t.isActive&&t.scrollIntoView()}this.updateDropDownTabBarItems()};mutationObserver=()=>{let e=new MutationObserver(this.mutationObserverCallback);return this.dom.current&&e.observe(this.dom.current,{childList:!0,subtree:!0}),()=>{e.disconnect()}};resizeObserver=()=>{let e=new ResizeObserver(this.resizeObserverCallback);return this.dom.current&&e.observe(this.dom.current),()=>{e.disconnect()}};addEventListener=()=>{let e=this.mutationObserver(),t=this.resizeObserver();return this.updateDropDownTabBarItems(),this.dom.current&&this.dom.current.addEventListener("scrollend",this.updateDropDownTabBarItems),()=>{this.dom.current&&this.dom.current.removeEventListener("scrollend",this.updateDropDownTabBarItems),e(),t()}}}(0,f.createContext)(new v);let b=new class{appPlugins={};addPlugin=e=>{this.appPlugins={...this.appPlugins,...e}};clear=()=>{}},_=new class{state=[{name:"无动画",config:{}},{name:"淡入淡出",config:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}}},{name:"滑动",config:{initial:{opacity:0,x:"-20%"},animate:{opacity:1,x:0},exit:{opacity:0,x:"20%"},transition:{duration:.5,ease:"easeOut"}}},{name:"3D翻转",config:{initial:{rotateY:90,opacity:0},animate:{rotateY:0,opacity:1},exit:{rotateY:-90,opacity:0},transition:{duration:.6},style:{transformStyle:"preserve-3d"}}},{name:"缩放",config:{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:1.2,opacity:0},transition:{duration:.5}}}];expands=e=>{let t=this.state.filter(t=>!e.some(e=>e.name===t.name));this.state=[...t,...e]};getAnimationConfig=e=>this.state.find(t=>t.name===e)?.config||{}};class I{aliveController;static convertIdOrNameOne=e=>`fairys_admin_keep_alive_${e}`;static convertIdOrNameList=e=>e.map(e=>I.convertIdOrNameOne(e));clear=()=>{this.aliveController?.clear?.()};drop=e=>{this.aliveController?.drop?.(I.convertIdOrNameOne(e))};dropById=e=>{this.aliveController?.dropById?.(I.convertIdOrNameOne(e))};dropScope=e=>{this.aliveController?.dropScope?.(I.convertIdOrNameOne(e))};dropScopeByIds=e=>{this.aliveController?.dropScopeByIds?.(I.convertIdOrNameList(e))};refresh=e=>{this.aliveController?.refresh?.(I.convertIdOrNameOne(e))};refreshById=e=>{this.aliveController?.refreshById?.(I.convertIdOrNameOne(e))};refreshScope=e=>{this.aliveController?.refreshScope?.(I.convertIdOrNameOne(e))};refreshScopeByIds=e=>{this.aliveController?.refreshScopeByIds?.(I.convertIdOrNameList(e))};getCachingNodes=()=>this.aliveController?.getCachingNodes?.()}new I;class M{state=(0,i.sj)({tabItems:[],dataList:[],title:"通知",isShowIcon:!0,count:0,visibleMoreModal:!1});ctor=e=>{let{tabItems:t,title:a,isShowIcon:s}=e;this.state.tabItems=(0,i.iH)(t||[]),this.state.activeKey=t?.[0]?.key,this.state.title=a||"通知",this.state.isShowIcon=s??!0};onUpdateActiveKey;_onUpdateActiveKey=e=>{this.state.activeKey=e,this.onUpdateActiveKey?.(e)};getDataType=e=>this.state[`dataList_${e}`]||[];updatedToType=(e,t)=>{this.state[`dataList_${e}`]=(0,i.iH)(t||[])};getDataList=()=>this.state.dataList||[];updateDataList=e=>{this.state.dataList=(0,i.iH)(e||[])};onClickItem;_onClickItem=e=>{this.onClickItem?.(e)};onClickMore;closeMoreModal=()=>{this.state.visibleMoreModal=!1};_onClickMore=()=>{this.state.visibleMoreModal=!0,this.onClickMore?.(this.state.activeKey)};clear=()=>{for(let e in this.state)"tabItems"!==e&&(this.state[e]=void 0)}}let w=new M;class C{static localStorageKey="fairys-favorites-data";state=(0,i.sj)({dataList:(0,i.iH)([])});constructor(){let e=localStorage.getItem(C.localStorageKey);if(e)try{let t=JSON.parse(e);this.state.dataList=(0,i.iH)(t||[])}catch(e){console.log(e)}}addItem=e=>{if((this.state.dataList||[]).find(t=>t.path===e.path))return;let t=d.state.favoritesMaxLength||20,a=[e,...this.state.dataList||[]].slice(0,t);this.state.dataList=(0,i.iH)(a);try{localStorage.setItem(C.localStorageKey,JSON.stringify(a))}catch(e){console.log("添加收藏本地存储",e)}};removeItem=e=>{this.state.dataList=(0,i.iH)((this.state.dataList||[]).filter(t=>t.path!==e.path))};clear=()=>{}}let j=new C,k=new class{static router=l;static setting=d;static menu=u;static tabBar=x;static account=n;static motionAnimation=_;static appPlugin=b;static notification=w;static favoritesDataInstance=j;aliveController;authDataInstance;clear=()=>{l.clear(),d.clear(),u.clear(),x.clear(),n.clear(),b.clear(),w.clear(),this.aliveController.clear()}};class S{constructor(){k.authDataInstance=this}state=(0,i.sj)({status:"Login",menusPermissions:[],btnsPermissions:[],ignorePermissions:[]});updatedStatus=e=>{this.state.status=e};onLogout=()=>void 0;_onLogout=()=>{this.updatedStatus("Login"),k.clear(),this.clear(),this.onLogout?.()};setIgnorePermissions=e=>{this.state.ignorePermissions=e};setMenusPermissions=e=>{this.state.menusPermissions=e};isMenuAuth=e=>!!this.state.ignorePermissions.includes(e)||this.state.menusPermissions.includes(e);setBtnsPermissions=e=>{this.state.btnsPermissions=e};isBtnAuth=e=>!!this.state.ignorePermissions.includes(e)||this.state.btnsPermissions.includes(e);clear=()=>{this.state.menusPermissions=[],this.state.btnsPermissions=[],this.state.ignorePermissions=[]}}new S;var N=a(8206);class L{isHideClose=!0;onClickItem;onCloseItem;items;mode;state=(0,i.sj)({value:void 0});isChecked=e=>!!this.state.value&&(Array.isArray(this.state.value)?this.state.value.includes(e.value||""):this.state.value===e.value)}let B=e=>{let t=(0,f.useRef)();return t.current||(e?t.current=e:t.current=new L),t.current},E=(0,f.createContext)(new L),T=()=>{let e=(0,f.useContext)(E),t=(0,N.R)(e.state);return[t,e,t.__defaultValue]};var O=a(406),D=a(5146),F=a(496);class A{state=(0,i.sj)({darkMode:!1});setDarkMode=e=>{this.state.darkMode=e}}let R=(0,f.createContext)(new A),H=()=>{let e=(0,f.useContext)(R);return[(0,N.R)(e.state),e]},P=e=>{let{children:t}=e,[a,s]=H(),i=a.darkMode;return(0,f.createElement)(R.Provider,{children:f.Children.map(t,e=>{let t=e?.props;return f.isValidElement(e)?(0,f.cloneElement)(e,{className:(0,F.Z)(t?.className,"fairys:transition-all fairys:duration-300",{dark:i})}):e}),value:s})};var Z=a(7560),$=a(4033);let z=(e=!1)=>{let[t,a]=(0,f.useState)(e);return{show:(0,f.useMemo)(()=>!!t||e,[t,e]),onAnimationComplete:e=>{a("open"===e)},setStatus:a}};var K=a(6967),Q=a(8117);let W={open:{scale:1,opacity:1,height:"auto"},collapsed:{scale:.5,opacity:0,height:0}},V={duration:.5},q=(0,f.forwardRef)((e,t)=>{let{content:a,children:i,onOpenChange:r,motionClassName:n,className:o,eventName:l,disabled:m=!1,placement:d,isNotMinWidth:h=!1}=e,[c,y]=(0,f.useState)(!1),{show:u,onAnimationComplete:p}=z(c),g=e=>{r?.(e),y(e)},x=(0,O.ay)(),v=(0,O.jV)(),b=(0,O.Zm)(),_="hover"===l||null!=b,[I,M]=(0,f.useState)(!1),{floatingStyles:w,refs:C,context:j}=(0,O.YF)({nodeId:v,open:c,onOpenChange:g,placement:d||(_?"right-start":"bottom-start"),middleware:[(0,Z.cv)({mainAxis:4*!_,alignmentAxis:_?-4:0}),(0,Z.RR)(),(0,Z.uY)(),(0,Z.dp)({apply({availableWidth:e,availableHeight:t,elements:a}){Object.assign(a.floating.style,{overflow:"auto",maxWidth:`${e}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${t}px)`})}})],whileElementsMounted:$.Me}),k=(0,O.XI)(j,{enabled:!m&&_&&I,delay:{open:75},handleClose:(0,O.xp)({blockPointerEvents:!0})}),S=("contextMenu"===l?function(){return{}}:O.eS)(j,{event:"mousedown",toggle:!_||!I,ignoreMouse:_,enabled:!m}),N=(0,O.qs)(j,{role:"menu"}),L=(0,O.bQ)(j,{bubbles:!0}),{getReferenceProps:B,getFloatingProps:E}=(0,O.NI)([k,S,N,L]);(0,f.useEffect)(()=>{if(x)return x.events.on("click",e),x.events.on("menuopen",t),()=>{x.events.off("click",e),x.events.off("menuopen",t)};function e(){g(!1)}function t(e){e.nodeId!==v&&e.parentId===b&&g(!1)}},[x,v,b]),(0,f.useEffect)(()=>{c&&x&&x.events.emit("menuopen",{parentId:b,nodeId:v})},[x,c,v,b]),(0,f.useEffect)(()=>{function e({pointerType:e}){"touch"!==e&&M(!0)}function t(){M(!1)}return window.addEventListener("pointermove",e,{once:!0,capture:!0}),window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("pointermove",e,{capture:!0}),window.removeEventListener("keydown",t,!0)}},[I]);let T=(0,O.qq)([C.setReference,t]),D=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_popover-base no-scrollbar",o,["fairys:rounded-sm fairys:bg-white fairys:dark:bg-gray-800! fairys:shadow-xl fairys:inset-shadow-sm"]),[o]),A=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_popover-base-motion fairys:overflow-hidden","fairys:flex fairys:flex-col fairys:relative fairys:border fairys:border-gray-100 fairys:dark:border-gray-700 fairys:rounded-md fairys:gap-1",n,["fairys:rounded-sm fairys:bg-white fairys:dark:bg-gray-800!"],{"fairys:min-w-[120px]":!1===h}),[n,h]);return(0,s.jsxs)(O.mN,{id:v,children:[f.Children.map(i,e=>f.isValidElement(e)?(0,f.cloneElement)(e,{ref:T,...B({onContextMenu:e=>{"contextMenu"===l&&(e.preventDefault(),j.onOpenChange(!0,e.nativeEvent,"click"))}})}):e),u?(0,s.jsx)(O.ll,{children:(0,s.jsx)(P,{children:(0,s.jsx)("div",{children:(0,s.jsx)(K.M,{children:(0,s.jsx)("div",{ref:C.setFloating,style:w,className:D,...E(),children:(0,s.jsx)(Q.E.div,{initial:"collapsed",animate:c?"open":"collapsed",variants:W,transition:V,onAnimationComplete:p,className:A,children:a})})})})})}):(0,s.jsx)(f.Fragment,{})]})}),J=(0,f.forwardRef)((e,t)=>{let{children:a,onOpenChange:i,eventName:r="click",className:n,motionClassName:o="",disabled:l=!1,content:m,placement:d,isNotMinWidth:f=!1}=e;return(0,s.jsx)(U,{children:(0,s.jsx)(q,{eventName:r,placement:d,onOpenChange:i,ref:t,content:m,className:n,disabled:l,motionClassName:o,isNotMinWidth:f,children:a})})}),U=e=>null===(0,O.Zm)()?(0,s.jsx)(O.RB,{children:e.children}):e.children,Y=(0,f.forwardRef)((e,t)=>{let{rowItemData:a,isSubMenuItem:i=!1}=e,{isShowClose:r=!0,className:n}=a,o=a.iconProps||{},l=(0,O.ay)(),[m,d]=T(),h=(0,f.useMemo)(()=>d.isChecked(a),[m.value]),c=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_popover_menu_item","fairys:shrink-0 fairys:text-gray-400 fairys:transition-all fairys:duration-300 fairys:flex fairys:flex-row fairys:items-center fairys:justify-between fairys:gap-1 fairys:py-[5px] fairys:px-[8px] fairys:mx-[5px] fairys:rounded-sm",{"fairys:opacity-70 fairys:select-none":a.disabled,"fairys:text-gray-600 fairys:cursor-pointer fairys:hover:text-gray-700 fairys:dark:text-gray-400 fairys:dark:hover:text-gray-300 fairys:dark:hover:bg-gray-700 fairys:hover:bg-gray-100":!a.disabled,"active fairys:bg-(--fairys-theme-color)! fairys:text-white!":h,"fairys:dark:bg-gray-700/75 fairys:bg-gray-100/75 fairys:text-gray-600!":!a.disabled&&i},n),[h,a,i,n]);return(0,s.jsxs)("div",{ref:t,onClick:e=>{a.disabled||i||(e.preventDefault(),d.onClickItem?.(a,e),a.onClick?.(a,e),"multiple"!==d.mode&&!1!==a.isClickClose&&l.events.emit("click"))},className:c,children:[(0,s.jsxs)("div",{className:"fairys:flex fairys:items-center fairys:flex-1",children:[a.icon?(0,s.jsx)("span",{className:"fairys:size-[16px] fairys:mr-2",children:(0,s.jsx)(D.JO,{...o,icon:a.icon,className:`fairys:size-[16px] ${o?.className||""}`})}):(0,s.jsx)(f.Fragment,{}),(0,s.jsx)("div",{children:a.title})]}),(0,s.jsx)("div",{children:i?(0,s.jsx)("span",{className:"fairys:icon-[ant-design--right-outlined] fairys:ml-5 fairys:text-gray-400 fairys:hover:text-gray-600 fairys:dark:hover:text-white fairys:dark:text-gray-500 fairys:transition-all fairys:duration-300"}):d.isHideClose||!1===r?(0,s.jsx)(f.Fragment,{}):(0,s.jsx)("span",{className:"fairys:icon-[ant-design--close-outlined] fairys:ml-5 fairys:text-gray-400 fairys:hover:text-gray-600 fairys:dark:hover:text-white fairys:dark:text-gray-500 fairys:transition-all fairys:duration-300",onClick:e=>{a.disabled||(e.preventDefault(),d.onCloseItem?.(a,e),a.onCloseItem?.(a,e))}})})]})}),X=(0,f.forwardRef)((e,t)=>{let{label:a,onOpenChange:i}=e,{rowItemData:r}=e,{items:n}=r,{popoverClassName:o,motionClassName:l}=r,m=(0,f.useMemo)(()=>(n||[]).map((e,t)=>G(e,t)),[n]);return(0,s.jsx)(J,{className:o,motionClassName:l,disabled:r.disabled,onOpenChange:i,ref:t,content:m,children:a||(0,s.jsx)(Y,{rowItemData:r,isSubMenuItem:!0})})}),G=(e,t)=>e.children?(0,s.jsx)(f.Fragment,{children:e.children},e.path||e.title||e.key||t):!1===e.visible?(0,s.jsx)(f.Fragment,{},e.path||e.title||e.key||t):e.isDivider?(0,s.jsx)("div",{className:"fairys:w-full fairys:h-[1px] fairys:bg-gray-100 fairys:dark:bg-gray-700"},e.path||e.title||e.key||t):Array.isArray(e.items)?(0,s.jsx)(X,{rowItemData:e},e.path||e.title||e.key||t):(0,s.jsx)(Y,{rowItemData:e},e.path||e.title||e.key||t),ee=(0,f.forwardRef)((e,t)=>{let{items:a,children:i,onOpenChange:r,onClickItem:n,onCloseItem:o,mode:l,value:m,isHideClose:d=!0,instance:h,eventName:c="click",className:y="",motionClassName:u="",disabled:p=!1,placement:g}=e,x=B(h);x.items=a,x.isHideClose=d,x.onClickItem=n,x.onCloseItem=o,x.mode=l,(0,f.useMemo)(()=>{x.state.value=m},[m]);let v=(0,f.useMemo)(()=>(a||[]).map((e,t)=>G(e,t)),[a]);return(0,s.jsx)(E.Provider,{value:x,children:(0,s.jsx)(J,{eventName:c,onOpenChange:r,ref:t,content:v,className:y,disabled:p,motionClassName:`fairys:py-[6px] ${u}`,placement:g,children:i})})}),et=e=>{let{items:t,separate:a="bg",className:i,itemClassName:r,itemStyle:n,isFristNoPadding:o=!1,...l}=e,m=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_breadcrumb fairys:relative fairys:flex fairys:items-center fairys:min-h-[36px] fairys:py-[8px] fairys:box-border",i,{[a]:!!a}),[a,i]),d=(0,f.useMemo)(()=>(t||[]).map((e,i)=>{let l=i===t.length-1,m=(0,F.Z)("fairys_admin_breadcrumb_item fairys:transition-all fairys:duration-300 fairys:relative fairys:cursor-pointer fairys:rounded-sm fairys:py-[6px] fairys:max-w-[150px] fairys:overflow-hidden fairys:text-ellipsis fairys:whitespace-nowrap",{"fairys:px-[14px]":0!==i&&o||!o,"fairys:pr-[14px]":o&&0===i,"fairys:text-gray-500 fairys:hover:text-gray-500":l,"fairys:text-gray-400 fairys:hover:text-gray-500":!l,"fairys:bg-gray-100 fairys:hover:bg-gray-100":l&&"bg"===a,"fairys:bg-gray-100 fairys:hover:bg-gray-200":!l&&"bg"===a,"fairys:dark:text-gray-300 fairys:dark:hover:text-gray-200":l,"fairys:dark:text-gray-400 fairys:dark:hover:text-gray-300":!l,"fairys:dark:bg-gray-800 fairys:dark:hover:bg-gray-700":"bg"===a,'fairys:after:text-gray-200 fairys:dark:after:text-gray-600 fairys:after:content-["/"]':"slash"===a},r);return(0,s.jsx)("div",{style:n,title:e.title,className:m,children:e.title},e.path)}),[t,n,o]);return(0,s.jsx)("div",{...l,className:m,children:d})},ea=(0,f.forwardRef)((e,t)=>{let{className:a,isBg:i,bordered:r=!1,...n}=e,o=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_button_base ",["fairys:outline-0","fairys:flex fairys:items-center fairys:justify-center fairys:min-w-[36px] fairys:min-h-[36px] fairys:rounded-sm fairys:cursor-pointer","fairys:transition-all fairys:duration-300","fairys:hover:bg-gray-200 fairys:dark:hover:bg-gray-600 ",i&&"fairys:bg-gray-200 fairys:dark:bg-gray-600"],{"fairys:border-0":!r,"fairys:border fairys:border-gray-300 fairys:dark:border-gray-600":r,"fairys:bg-transparent":!i&&!r},a),[a,r,i]);return(0,s.jsx)("button",{...n,ref:t,className:o})}),es=e=>{let{children:t,open:a,className:i,...r}=e,{show:n,onAnimationComplete:o}=z(a);return(0,s.jsx)(K.M,{initial:!1,mode:"wait",children:n&&(0,s.jsx)(Q.E.div,{...r,className:i,initial:"collapsed",animate:a?"open":"collapsed",variants:{open:{scale:1,opacity:1,height:"auto"},collapsed:{scale:.5,opacity:0,height:0}},transition:{duration:.35},onAnimationComplete:o,children:t})})},ei=(0,f.forwardRef)((e,t)=>{let{title:a="",tips:i="载入中",className:r,loading:n=!1,...o}=e,{show:l,onAnimationComplete:m}=z(n),d=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_enter_loading fairys:bg-white/75 fairys:dark:bg-black/75",r),[r]);return l?(0,s.jsxs)(Q.E.div,{...o,ref:t,className:d,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationComplete:m,children:[(0,s.jsxs)("div",{className:"fairys_admin_enter_loading-main",children:[(0,s.jsx)("div",{className:"square"}),(0,s.jsx)("div",{className:"square"}),(0,s.jsx)("div",{className:"square"}),(0,s.jsx)("div",{className:"square"})]}),(0,s.jsx)("div",{className:"name",children:a}),(0,s.jsxs)("div",{className:"tips",children:[i,(0,s.jsx)("span",{className:"loading-dots"})]})]}):(0,s.jsx)(f.Fragment,{})});var er=a(4618);class en{open=!1;onClose;onEsc=()=>{if(this.open){let e=this;(0,er.Z)("esc",t=>{t.preventDefault(),e.onClose?.()})}return()=>{er.Z.unbind("esc")}}}let eo=()=>(0,f.useRef)(new en).current,el=e=>{let{open:t,children:a,onClose:i,className:r,...n}=e,o=eo();o.onClose=i,o.open=t;let l=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_full_screen fairys:transparent fairys:transition-all fairys:duration-300 fairys:overflow-hidden fairys:w-full fairys:h-full",r,{"fairys:absolute fairys:bg-white fairys:dark:bg-gray-800 fairys:top-0 fairys:left-0 fairys:right-0 fairys:bottom-0":!!t}),[t,r]),m=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_full_screen_close fairys:transition-all fairys:duration-300 fairys:justify-center fairys:items-center fairys:flex fairys:absolute fairys:top-0 fairys:right-0 fairys:w-[38px] fairys:h-[38px] fairys:bg-neutral-500 fairys:hover:bg-neutral-600 fairys:cursor-pointer",{}),[t]);return(0,f.useEffect)(o.onEsc,[t]),(0,s.jsxs)("div",{...n,className:l,children:[t?(0,s.jsx)("div",{title:"退出全屏",className:m,onClick:i,children:(0,s.jsx)("span",{className:"fairys:absolute fairys:top-[4px] fairys:right-[4px] fairys:text-white fairys:dark:hover:text-neutral-300 fairys:size-[20px] fairys:icon-[mdi-light--fullscreen-exit]"})}):(0,s.jsx)(f.Fragment,{}),a]})};new class{keepAlive;isOutletKeepAlive};let em=e=>{let{items:t=[],onChange:a,multiple:i=!1,value:r,disabled:n=!1}=e,[o,l]=(0,f.useState)(!1),m=(0,f.useMemo)(()=>(0,F.Z)("fairys:relative fairys:after:bg-current fairys:before:bg-current fairys:after:-translate-y-[1px] fairys:before:-translate-y-[1px]",{expand:o,close:!o}),[o]),d=(0,f.useMemo)(()=>Array.isArray(r)&&r.length||!r?"请选择":i&&Array.isArray(r)?(r||[]).map(e=>{let a=t.find(t=>t.value===e);return a?.title}).join(","):t.find(e=>e.value===r)?.title,[r,t,i]);return(0,s.jsx)(ee,{disabled:n,items:t,onOpenChange:e=>l(e),onClickItem:e=>{i?Array.isArray(r)?(r||[]).find(t=>t===e.value)?a?.(r.filter(t=>t!==e.value)):a?.(r.concat([e.value])):a?.([e.value]):a?.(e.value)},value:r,mode:i?"multiple":"single",children:(0,s.jsxs)("div",{className:"fairys:min-w-[120px] fairys:min-h-[38px] fairys:px-[12px] fairys:py-[4px] fairys:border fairys:border-gray-200 fairys:dark:border-gray-700 fairys:rounded-sm fairys:cursor-pointer fairys:flex fairys:flex-row fairys:justify-between fairys:items-center",children:[(0,s.jsx)("span",{children:d}),(0,s.jsx)("span",{className:"fairys_admin_down_up_icon fairys:size-[16px] fairys:flex fairys:items-center fairys:justify-center fairys:relative",children:(0,s.jsx)("div",{className:m})})]})})};function ed(e){let{value:t=!1,onChange:a=()=>void 0,disabled:i=!1}=e;return(0,s.jsxs)(Q.E.div,{style:{width:36,height:20,borderRadius:16,backgroundColor:"rgba(120,120,128,.56)",position:"relative",cursor:"pointer",opacity:i?.5:1,pointerEvents:i?"none":"auto"},animate:t?"on":"off",initial:!1,onTapStart:()=>a(!t),children:[(0,s.jsx)(Q.E.div,{style:{width:"100%",height:"100%",borderRadius:16,backgroundColor:"#34C759"},variants:{off:{scale:0},on:{scale:1}},transition:{ease:"easeInOut"}}),(0,s.jsx)(Q.E.div,{style:{width:16,height:16,borderRadius:16,backgroundColor:"white",boxShadow:"0 0 0 0.5px rgba(0,0,0,.04), 0 3px 8px 0 rgba(0,0,0,.15), 0 3px 1px 0 rgba(0,0,0,.06)",position:"absolute",top:2,left:2},variants:{off:{x:0},on:{x:16}},transition:{ease:"easeInOut"}})]})}let ef=(0,f.forwardRef)((e,t)=>{let{className:a,children:i,...r}=e,n=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_main_page_search fairys:w-full fairys:box-border",a),[a]);return(0,s.jsx)("div",{...r,ref:t,className:n,children:i})}),eh=(0,f.forwardRef)((e,t)=>{let{className:a,children:i,...r}=e,n=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_main_page_body fairys:w-full fairys:box-border fairys:flex-1 fairys:flex fairys:flex-col fairys:overflow-auto",a),[a]);return(0,s.jsx)("div",{...r,ref:t,className:n,children:i})}),ec=(0,f.forwardRef)((e,t)=>{let{className:a,children:i,...r}=e,n=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_main_page_footer fairys:box-border fairys:w-full",a),[a]);return(0,s.jsx)("div",{...r,ref:t,className:n,children:i})}),ey=(0,f.forwardRef)((e,t)=>{let{className:a,children:i,bodyClassName:r,...n}=e,o=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_main_page fairys:p-[14px] fairys:box-border fairys:h-full fairys:w-full fairys:bg-stone-100 fairys:dark:bg-gray-950",a),[a]),l=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_main_page_main fairys:p-[14px] fairys:flex fairys:flex-col fairys:box-border fairys:h-full fairys:w-full fairys:bg-white fairys:dark:bg-gray-900 fairys:rounded-sm",r),[r]);return(0,s.jsx)("div",{...n,ref:t,className:o,children:(0,s.jsx)("div",{className:l,children:i})})});class eu{name;value;errors}let ep=e=>{let{name:t,valuePropName:a="value",formatValue:s}=e,i=eb(),r=(0,N.R)(i.state),n=(0,f.useRef)(new eu).current;n.name=t;let o=r.errors?.[t],l=r.formData?.[t];return n.value=l,n.errors=o,(0,f.useEffect)(()=>{let e=i.register(t,n);return()=>{e()}},[t]),{value:l,errors:o,itemInstance:n,formInstance:i,onChange:e=>{let r=e;e&&e.target&&"object"==typeof e.target&&a in e.target&&(r=e.target[a]),"function"==typeof s&&(r=s(r,i,e)),i.onValueChange(t,r)}}};class eg{state=(0,i.sj)({formData:{},errors:{}});items=new Map([]);rules={};register=(e,t)=>(this.items.set(e,t),()=>{this.items.delete(e)});updatedFormData=(e,t)=>{if(e){for(let t in e)this.state.formData[t]=e[t];if(t)try{this.validate(Object.keys(e),!1)}catch(e){console.log(e)}}};updatedErrors=e=>{for(let t in e)(0,f.isValidElement)(e[t])?this.state.errors[t]=(0,i.iH)(e[t]):this.state.errors[t]=e[t]};validate=async(e,t=!0)=>{let a={},s=!0;for(let t of e||this.items.keys()){let e=this.rules?.[t];if(a[t]="","function"==typeof e){let i=await e(this.state.formData[t],this.state.formData);i&&(a[t]=i,s=!1)}}if(this.updatedErrors(a),t)return s?Promise.resolve({value:(0,i.CO)(this.state.formData),errors:a}):Promise.reject({value:(0,i.CO)(this.state.formData),errors:a})};onValueChange=(e,t)=>{this.updatedFormData({[e]:t},!0)}}let ex=e=>{let t=(0,f.useRef)();return t.current||(e?t.current=e:t.current=new eg),t.current},ev=(0,f.createContext)(new eg),eb=()=>(0,f.useContext)(ev),e_=e=>{let{className:t,title:a,form:i,children:r,rules:n,bodyClassName:o,titleClassName:l,mainClassName:m,...d}=e,h=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page fairys:w-full fairys:h-full fairys:flex fairys:items-center fairys:justify-center fairys:overflow-auto fairys:box-border",t),[t]),c=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content fairys:p-[14px] fairys:flex fairys:flex-col fairys:w-[400px] fairys:h-[400px] fairys:rounded-sm fairys:gap-y-[20px] fairys:box-border  fairys:shadow-xl fairys:inset-shadow-sm ",m),[m]),y=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_title fairys:flex fairys:items-center fairys:justify-center fairys:text-[24px] fairys:font-bold fairys:box-border",l),[l]),u=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_form fairys:flex-1 fairys:flex fairys:flex-col fairys:gap-[20px] fairys:box-border",o),[o]),p=ex(i);return p.rules=n,(0,s.jsx)(ev.Provider,{value:p,children:(0,s.jsx)("div",{className:h,...d,children:(0,s.jsxs)("div",{className:c,children:[(0,s.jsx)("div",{className:y,children:a}),(0,s.jsx)("div",{className:u,children:r})]})})})};e_.useForm=ex,e_.useFormInstance=eb,e_.FormItem=e=>{let{label:t,children:a,className:i,formatValue:r,valuePropName:n,name:o,required:l,isShowErrorMessage:m,layout:d="vertical",labelClassName:h,...c}=e,y=ep({name:o,formatValue:r,valuePropName:n}),u=y.errors,p=!!u,g=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_form_item fairys:flex ",i,{"fairys:flex-row fairys:gap-x-[12px]":"horizontal"===d,"fairys:flex-col fairys:gap-y-[4px]":"vertical"===d}),[i,d]),x=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_form_item_label fairys:min-w-[80px] fairys:relative fairys:flex fairys:items-center fairys:font-medium fairys:text-[14px]",h,{"fairys:before:content-['*'] fairys:before:text-red-600 fairys:before:mr-[2px]":l,"fairys:justify-end":"horizontal"===d}),[l,d,h]),v=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_form_item_content fairys:relative",{"fairys:flex-1":"horizontal"===d}),[d]),b="number"==typeof y.value||"boolean"==typeof y.value?y.value:y.value||"";return(0,s.jsxs)("div",{...c,className:g,children:[(0,s.jsx)("label",{className:x,htmlFor:o,children:t}),(0,s.jsxs)("div",{className:v,children:[(0,f.isValidElement)(a)?(0,f.cloneElement)(a,{value:b,onChange:y.onChange,id:o,"data-is-error":p,name:o}):a,m&&p?(0,s.jsx)("div",{className:"fairys_login_page_content_form_item_error_message fairys:absolute fairys:top-full fairys:left-0 fairys:text-[10px] fairys:text-red-500",children:u}):(0,s.jsx)(f.Fragment,{})]})]})},e_.FormItemInput=e=>{let{className:t,errorBorderd:a="bottom",...i}=e,r=(0,f.useMemo)(()=>(0,F.Z)("fairys_login_page_content_form_item_input fairys:disabled:bg-gray-100 fairys:dark:disabled:bg-gray-700 fairys:transition-all fairys:duration-300 fairys:py-[8px] fairys:px-[12px] fairys:outline-none fairys:box-border fairys:w-full fairys:min-h-[32px] fairys:rounded-sm fairys:text-sm fairys:border fairys:border-gray-200 fairys:dark:border-gray-700 fairys:data-[is-error=true]:text-red-500 fairys:data-[is-error=true]:placeholder:text-red-500",t,{"fairys:data-[is-error=true]:border-red-500":"all"===a,"fairys:data-[is-error=true]:border-b-red-500":"bottom"===a}),[t,a]);return(0,s.jsx)("input",{...i,className:r})};let eI=(e,t,a=1)=>{let s=document.createElement("canvas"),i=s.getContext("2d"),r=e*a,n=t*a;return s.setAttribute("width",`${r}px`),s.setAttribute("height",`${n}px`),i.save(),[i,s,r,n]},eM=(e,t,a)=>[e*Math.cos(a)-t*Math.sin(a),e*Math.sin(a)+t*Math.cos(a)],ew=(e,t=!1)=>t&&null==e?[]:Array.isArray(e)?e:[e];class eC{dom=(0,f.createRef)();content;width;height;image;rotate=-22;gap=[100,100];offset;zIndex;font;_ctx;state=(0,i.sj)({dataURL:"",finalWidth:0,finalHeight:0,darkDataURL:"",darkFinalWidth:0,darkFinalHeight:0,markStyle:{}});createMarkStyle=()=>{let[e=100,t=100]=this.gap,a=e/2,s=t/2,i=this.offset?.[0]??a,r=this.offset?.[1]??s,n={zIndex:this.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"},o=i-a,l=r-s;return o>0&&(n.left=`${o}px`,n.width=`calc(100% - ${o}px)`,o=0),l>0&&(n.top=`${l}px`,n.height=`calc(100% - ${l}px)`,l=0),n.backgroundPosition=`${o}px ${l}px`,this.state.markStyle=n,n};getMarkSize=e=>{let t=120,a=64;if(!this.image&&e.measureText){e.font=`${Number(this.font?.fontSize??20)}px ${this.font?.fontFamily??"sans-serif"}`;let s=ew(this.content),i=s.map(t=>{let a=e.measureText(t);return[a.width,a.fontBoundingBoxAscent+a.fontBoundingBoxDescent]});t=Math.ceil(Math.max(...i.map(e=>e[0]))),a=Math.ceil(Math.max(...i.map(e=>e[1])))*s.length+(s.length-1)*3}return[this.width??t,this.height??a]};getClips=(e,t,a,s,i,r,n,o)=>{let[l,m,d,f]=eI(s,i,a);if(e instanceof HTMLImageElement)l.drawImage(e,0,0,d,f);else{let{color:t,fontSize:s,fontStyle:n,fontWeight:o,fontFamily:m,textAlign:f}=r,h=Number(s)*a;l.font=`${n} normal ${o} ${h}px/${i}px ${m}`,l.fillStyle=t,l.textAlign=f,l.textBaseline="top";let c=ew(e);c?.forEach((e,t)=>{l.fillText(e??"",d/2,t*(h+3*a))})}let h=Math.PI/180*Number(t),c=Math.max(s,i),[y,u,p]=eI(c,c,a);y.translate(p/2,p/2),y.rotate(h),d>0&&f>0&&y.drawImage(m,-d/2,-f/2);let g=0,x=0,v=0,b=0,_=d/2,I=f/2;[[0-_,0-I],[0+_,0-I],[0+_,0+I],[0-_,0+I]].forEach(([e,t])=>{let[a,s]=eM(e,t,h);g=Math.min(g,a),x=Math.max(x,a),v=Math.min(v,s),b=Math.max(b,s)});let M=g+p/2,w=v+p/2,C=x-g,j=b-v,k=n*a,S=o*a,N=(C+k)*2,L=j+S,[B,E]=eI(N,L),T=(e=0,t=0)=>{B.drawImage(u,M,w,C,j,e,t,C,j)};return T(),T(C+k,-j/2-S/2),T(C+k,j/2+S/2),[E.toDataURL(),N/a,L/a]};onDrawCanvas=(e,t)=>{if(!t)return;let a=window.devicePixelRatio||1,[s,i]=this.getMarkSize(e),[r=100,n=100]=this.gap,o=e=>this.getClips(t,this.rotate??-22,a,s,i,{color:e,fontSize:this.font?.fontSize??20,fontStyle:this.font?.fontStyle??"normal",fontWeight:this.font?.fontWeight??"normal",fontFamily:this.font?.fontFamily??"sans-serif",textAlign:this.font?.textAlign??"center"},r,n),[l,m,d]=o(this.font?.color??"rgba(0, 0, 0, 0.15)");this.state.dataURL=l,this.state.finalWidth=m,this.state.finalHeight=d;let[f,h,c]=o(this.font?.darkColor??"rgba(255, 255, 255, 0.15)");this.state.darkDataURL=f,this.state.darkFinalWidth=h,this.state.darkFinalHeight=c};createWatermark=()=>{let e=document.createElement("canvas");if(this._ctx=e.getContext("2d"),this._ctx)if(this.image){let e=new Image;e.onload=()=>{this.onDrawCanvas(this._ctx,e)},e.onerror=()=>{this.onDrawCanvas(this._ctx,this.content)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=this.image}else this.onDrawCanvas(this._ctx,this.content)}}new eC;class ej{activeKey;onChange;state=(0,i.sj)({activeKey:""});onSelected=e=>{this.state.activeKey=e.key,this.onChange?.(e.key,e)}}let ek=e=>{let t=(0,f.useRef)();return t.current||(e?t.current=e:t.current=new ej),t.current},eS=(0,f.createContext)(new ej),eN=()=>{let e=(0,f.useContext)(eS),t=(0,N.R)(e.state);return[t,e,t.__defaultValue]},eL=(0,f.forwardRef)((e,t)=>{let{item:a}=e,i=a.disabled,[r,n]=eN(),o=r.activeKey===a.key,l=a.iconProps,m=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_tabs_item fairys:relative fairys:flex-1 fairys:cursor-pointer fairys:px-2 fairys:py-1 fairys:transition-all fairys:duration-300",{"fairys:opacity-50":i,"fairys:text-white":o,"fairys:text-gray-600 fairys:dark:text-gray-400":!o}),[i,o]);return(0,s.jsxs)(Q.E.div,{ref:t,className:m,onClick:e=>{e.preventDefault(),i||n.onSelected(a)},children:[o?(0,s.jsx)(Q.E.div,{style:{width:"100%",height:"100%",position:"absolute",borderRadius:15,top:0,left:0},layoutId:"selected",initial:{backgroundColor:"var(--fairys-theme-color)"},animate:{backgroundColor:"var(--fairys-theme-color)"},transition:{duration:.3}}):(0,s.jsx)(f.Fragment,{}),(0,s.jsxs)("div",{className:"fairys_admin_tabs-item-content fairys:relative fairys:w-full fairys:h-full fairys:flex fairys:flex-row fairys:items-center fairys:justify-center fairys:gap-2",children:[a?.icon?(0,s.jsx)("div",{className:"fairys_admin_tabs-item-icon fairys:w-[26px] fairys:h-[26px] fairys:min-w-[26px] fairys:flex fairys:justify-center fairys:items-center",children:(0,s.jsx)(D.JO,{...l,icon:a.icon,className:`fairys:w-[16px] fairys:h-[16px] ${l?.className||""}`})}):(0,s.jsx)(f.Fragment,{}),(0,s.jsx)("div",{children:a.title})]})]})}),eB=(0,f.forwardRef)((e,t)=>{let{items:a,activeKey:i,onChange:r}=e,n=ek();n.onChange=r,(0,f.useMemo)(()=>{n.state.activeKey=i||""},[i]);let o=(0,f.useMemo)(()=>a.map(e=>(0,s.jsx)(eL,{item:e},e.key)),[a]),l=(0,f.useMemo)(()=>(0,F.Z)("fairys_admin_tabs fairys:flex fairys:flex-row fairys:justify-evenly fairys:my-2"),[]);return(0,s.jsx)(eS.Provider,{value:n,children:(0,s.jsx)("div",{ref:t,className:l,children:o})})});new class{onClickItem};let eE="fairys_admin_sub_menu fairys:shrink-0 fairys:flex fairys:flex-col fairys:gap-y-[2px] ",eT=e=>{let{item:t,level:a=0,isMain:s=!1}=e,[i]=useMenuData(),r=i.expandItems,n=i.mainExpandItem,[o]=useSetting(),l=o.sideMenuMode,[m,d]=useState(!1),f=useMemo(()=>s?n?.path===t.path:!!r.find(e=>e.path===t.path),[r,t.path,s,n]),h=useMemo(()=>t.items?.map(e=>Array.isArray(e.items)?jsx(eT,{item:e,level:a+1},e.path):jsx(MenuItem,{item:e,level:a+1},e.path)),[t.items,a,s]);return"close"!==l?jsxs("div",{className:eE,children:[s?jsx(MainMenuItem,{item:t}):jsx(MenuItem,{item:t,level:a,isSubMenu:!0,isExpand:f}),jsx(FairysDisclosureItem,{open:!!s||f,className:"fairys_admin_sub_menu_body fairys:shrink-0 fairys:flex fairys:flex-col fairys:gap-y-[2px]",children:h})]}):jsx("div",{className:eE,children:jsx(FairysPopoverBase,{className:"fairys_admin_sub_menu_popover",eventName:"hover",content:jsx("div",{className:"fairys_admin_sub_menu_body fairys:shrink-0 fairys:flex fairys:flex-col fairys:gap-y-[2px] fairys:p-[5px]",children:h}),onOpenChange:d,placement:"right-start",isNotMinWidth:!0,children:s?jsx(MainMenuItem,{item:t}):jsx(MenuItem,{item:t,level:a,isSubMenu:!0,isExpand:m})})})};a(50)}}]);