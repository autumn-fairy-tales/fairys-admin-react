"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8628"],{4199:function(n,e,t){t.r(e),t.d(e,{default:()=>h});var s=t(4246),a=t(980);function i(n){let e=Object.assign({h1:"h1",a:"a",div:"div",p:"p",code:"code",h2:"h2",pre:"pre"},(0,a.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"authdatainstance-认证数据",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#authdatainstance-认证数据",children:"#"}),"authDataInstance 认证数据"]}),"\n",(0,s.jsxs)(e.div,{className:"rspress-directive tip",children:[(0,s.jsx)(e.div,{className:"rspress-directive-title",children:"提示"}),(0,s.jsx)(e.div,{className:"rspress-directive-content",children:(0,s.jsx)(e.p,{children:"用于存储当前应用的认证数据，包括登录状态、菜单权限、按钮权限、忽略权限等。"})})]}),"\n",(0,s.jsxs)(e.div,{className:"rspress-directive warning",children:[(0,s.jsx)(e.div,{className:"rspress-directive-title",children:"注意"}),(0,s.jsxs)(e.div,{className:"rspress-directive-content",children:[(0,s.jsxs)(e.p,{children:["在调用方法判断是否有权限时，请确认已经设置",(0,s.jsx)(e.code,{children:"menusPermissions"}),"和",(0,s.jsx)(e.code,{children:"btnsPermissions"}),"值。"]}),(0,s.jsxs)(e.p,{children:["建议在加载",(0,s.jsx)(e.code,{children:"Layout"}),"或",(0,s.jsx)(e.code,{children:"FairysRoot"}),"组件之前设置。"]})]})]}),"\n",(0,s.jsxs)(e.h2,{id:"引入",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#引入",children:"#"}),"引入"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"import { authDataInstance , useAuthDataInstance } from '@fairys/admin-tools-react';\n"})}),"\n",(0,s.jsxs)(e.h2,{id:"状态值",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#状态值",children:"#"}),"状态值"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:"export interface AuthDataInstanceState {\n    /**\n     * NoAuth 没权限\n     * Auth 有权限，已进入页面\n     * RequestAuth 加载中权限中\n     * Login 进入登录页面\n     */\n    status: 'NoAuth' | 'Auth' | 'RequestAuth' | 'Login';\n    /**菜单权限*/\n    menusPermissions: string[];\n    /**按钮权限*/\n    btnsPermissions: string[];\n    /**忽略权限(忽略权限不会进行权限判断，不分按钮还是菜单,在判断时始终为true)*/\n    ignorePermissions: string[];\n}\n"})}),"\n",(0,s.jsxs)(e.h2,{id:"实体类",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#实体类",children:"#"}),"实体类"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'export declare class AuthDataInstance {\n    state: AuthDataInstanceState;\n    updatedStatus: (status: AuthDataInstanceState["status"]) => void;\n    /**退出登录(需要外部赋值)*/\n    onLogout: () => void;\n    /**内部退出登录*/\n    _onLogout: () => void;\n    /**设置忽略权限*/\n    setIgnorePermissions: (permissions: string[]) => void;\n    /**设置菜单权限*/\n    setMenusPermissions: (permissions: string[]) => void;\n    /**是否有菜单权限*/\n    isMenuAuth: (path: string) => boolean;\n    /**设置按钮权限*/\n    setBtnsPermissions: (permissions: string[]) => void;\n    /**是否有按钮权限*/\n    isBtnAuth: (path: string) => boolean;\n    /**清空数据*/\n    clear: () => void;\n}\n\n'})}),"\n",(0,s.jsxs)(e.h2,{id:"hooks",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#hooks",children:"#"}),"hooks"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",children:'export  const useAuthDataInstance: () => [AuthDataInstanceState, AuthDataInstance, AuthDataInstanceState["__defaultValue"]];\n'})}),"\n",(0,s.jsxs)(e.h2,{id:"示例",children:[(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#示例",children:"#"}),"示例"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",meta:"title='认证数据示例'",children:"import { authDataInstance } from '@fairys/admin-tools-react';\n\n// 设置菜单权限\nauthDataInstance.setMenusPermissions(['/home', '/user']);\n// 设置按钮权限\nauthDataInstance.setBtnsPermissions(['/home/btn1', '/user/btn2']);\n// 设置忽略权限\nauthDataInstance.setIgnorePermissions(['/ignore']);\n\n// 判断菜单权限\nauthDataInstance.isMenuAuth('/home'); // true\nauthDataInstance.isMenuAuth('/user'); // true\nauthDataInstance.isMenuAuth('/ignore'); // true\nauthDataInstance.isMenuAuth('/about'); // false\n\n// 判断按钮权限\nauthDataInstance.isBtnAuth('/user/btn2'); // true\nauthDataInstance.isBtnAuth('/ignore/btn1'); // false\n\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",meta:"title='退出登录方法回调'",children:"import { authDataInstance } from '@fairys/admin-tools-react';\n\n// 设置退出登录回调\nauthDataInstance.onLogout = () => {\n    // 退出登录逻辑\n};\n\n"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-ts",meta:"title='认证状态更新'",children:"import { authDataInstance } from '@fairys/admin-tools-react';\n\n// 更新认证状态为 Login === 加载登录页面\nauthDataInstance.updatedStatus('Login');\n// 更新认证状态为 Auth  === 登录完成，进入项目页面\nauthDataInstance.updatedStatus('Auth');\n// 更新认证状态为 RequestAuth === 加载中权限中\nauthDataInstance.updatedStatus('RequestAuth');\n// 更新认证状态为 NoAuth === 没有权限，不可进入项目页面\nauthDataInstance.updatedStatus('NoAuth');\n\n"})})]})}function r(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(i,n)})):i(n)}let h=r;r.__RSPRESS_PAGE_META={},r.__RSPRESS_PAGE_META["zh%2Fcontext%2FauthDataInstance.md"]={toc:[{id:"引入",text:"引入",depth:2},{id:"状态值",text:"状态值",depth:2},{id:"实体类",text:"实体类",depth:2},{id:"hooks",text:"hooks",depth:2},{id:"示例",text:"示例",depth:2}],title:"authDataInstance 认证数据",headingTitle:"authDataInstance 认证数据",frontmatter:{}}}}]);